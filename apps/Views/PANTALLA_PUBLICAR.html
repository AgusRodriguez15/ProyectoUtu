<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pantalla Publicar Oficio</title>
  <link rel="stylesheet" href="../../public/CSS/estilos_generales.css">
  <script>
    const ADMIN_PASSWORD = 'admin123';
    function goToAdminPanel(e) {
      e.preventDefault();
      document.getElementById('adminModal').style.display = 'flex';
      document.getElementById('adminPassInput').value = '';
      document.getElementById('adminPassInput').focus();
      document.getElementById('adminError').textContent = '';
    }
    function closeAdminModal() {
      document.getElementById('adminModal').style.display = 'none';
    }
    function checkAdminPassword() {
      const pass = document.getElementById('adminPassInput').value;
      if(pass === ADMIN_PASSWORD) {
        window.location.href = 'PANTALLA_ADMIN.html';
      } else {
        document.getElementById('adminError').textContent = 'Contraseña incorrecta';
      }
    }
    document.addEventListener('DOMContentLoaded', function() {
      document.getElementById('adminPassInput').addEventListener('keydown', function(e) {
        if(e.key === 'Enter') { checkAdminPassword(); }
      });
    });
  </script>
</head>
<body>
  <div id="adminModal" class="modal">
    <div class="modal-content">
      <h3>Contraseña de Administrador</h3>
      <input type="password" id="adminPassInput" placeholder="Contraseña" autocomplete="off">
      <div id="adminError" class="error-text"></div>
      <button onclick="checkAdminPassword()">Entrar</button>
      <button onclick="closeAdminModal()">Cancelar</button>
    </div>
  </div>

  <header class="header">
    <div class="admin-nav">
      <a class="admin-btn" href="PANTALLA_PUBLICAR.html">Publicar Oficio</a>
      <a class="admin-btn" href="PANTALLA_CONTRATAR.html">Contratar Oficio</a>
      <a class="admin-btn" href="#" onclick="goToAdminPanel(event)">Panel Administrador</a>
      <a class="admin-btn" href="../public/index.html">Cerrar sesión</a>
    </div>
    <div class="logo">
      <h1>CONTRATA YA</h1>
    </div>
    <nav class="nav">
      <a href="PANTALLA.html">Inicio</a>
      <a href="PANTALLA_CONTRATAR.html">Contratar Oficio</a>
      <a href="PANTALLA_PUBLICAR.html">Publicar Oficio</a>
      <a href="#" onclick="goToAdminPanel(event)">Panel Administrador</a>
      <a href="#">Mi Perfil</a>
      <a href="#" onclick="mostrarMensajeria(event)">Mensajes</a>
    </nav>
  </header>

  <section class="hero">
    <div class="hero-content">
      <h2>Publica tu Oficio</h2>
      <p>Completa el formulario para ofrecer tus servicios en nuestra plataforma.</p>
    </div>
  </section>

  <section class="grid-section">
    <h2>Formulario de Publicación</h2>
    <form class="card" id="publicarForm">
      <label for="oficio">Oficio:</label>
      <input type="text" id="oficio" name="oficio" required>
      <label for="descripcion">Descripción:</label>
      <textarea id="descripcion" name="descripcion" rows="3" required></textarea>
      <label for="ubicacion">Ubicación:</label>
      <input type="text" id="ubicacion" name="ubicacion" required>
      <label for="contacto">Contacto:</label>
      <input type="text" id="contacto" name="contacto" required>
      <button class="feature-btn" type="submit">Publicar</button>
    </form>
  </section>

  <div id="mensajeriaModal" class="modal">
    <div class="modal-content">
      <h3>Mensajería</h3>
      <div id="mensajes" class="mensajes-box"></div>
      <input type="text" id="destinatarioInput" placeholder="Para: usuario@ejemplo.com">
      <input type="text" id="mensajeInput" placeholder="Escribe un mensaje...">
      <button type="button" onclick="enviarMensaje()">Enviar</button>
      <button type="button" onclick="cerrarMensajeria()">Cerrar</button>
    </div>
  </div>

  <footer class="footer">
    <p>&copy; CONTRATA YA 2025 - Todos los derechos reservados</p>
  </footer>

  <script>
    function mostrarMensajeria(e) {
      e.preventDefault();
      document.getElementById('mensajeriaModal').style.display = 'flex';
    }
    function cerrarMensajeria() {
      document.getElementById('mensajeriaModal').style.display = 'none';
    }
    function enviarMensaje() {
      const input = document.getElementById('mensajeInput');
      const destinatario = document.getElementById('destinatarioInput');
      const mensajes = document.getElementById('mensajes');
      if(input.value.trim() !== '' && destinatario.value.trim() !== '') {
        const nuevo = document.createElement('div');
        nuevo.innerHTML = '<b>Para: ' + destinatario.value + '</b><br>' + input.value;
        nuevo.classList.add('mensaje-item');
        mensajes.appendChild(nuevo);
        input.value = '';
        mensajes.scrollTop = mensajes.scrollHeight;
      }
    }
  </script>
</body>
</html>
